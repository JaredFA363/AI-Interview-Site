{% extends "base.html" %}

{% load static %}

{% block title %} Main Page {% endblock %}
{% block content %}
<p>this is the main user page</p>
<!--div class="speech_to_text">
    <h1>Q to Answer</h1>
    <textarea id="convert_text"></textarea>
    <button id="click_to_convert">Answer</button>
</div>

<script type="text/javascript" src="{% static 'speechconverter/speechconverter.js' %}"></script-->
    <form method="POST">
        {% csrf_token %}
        <input id="the_button" type="button" value="Click to Speak">
        <input id="the_form" type="text" name="q" size=80 >

        <script type="text/javascript">
            var SpeechRecognition = new (window.SpeechRecognition || window.webkitSpeechRecognition
            || window.mozSpeechRecognition || window.msSpeechRecognition)();

            const the_button = document.getElementById("the_button");
            the_button.addEventListener('click', function(event) {
                SpeechRecognition.start();
            })

            SpeechRecognition.onresult = function(event){
                var the_text = event.results[0][0].transcript;
                document.getElementById('the_form').value = the_text;
            };

            SpeechRecognition.onend = function(){
                SpeechRecognition.stop();
            };
        </script>

        <input type="submit" value="Submit">
    </form>

{% endblock %}